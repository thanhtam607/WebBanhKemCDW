{"ast":null,"code":"import _createForOfIteratorHelper from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _regeneratorRuntime from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _inherits from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import\"./CheckOut.scss\";import Header from'../Header/Header';import Footer from'../Footer/Footer';import Breadcrumb from\"../breadcrumb\";import Error from\"../../../components/Error/Error\";import{createBill,getCommunes,getDistricts}from\"../../../services/billService\";import{deleteCart}from\"../../../services/cartService\";import*as actions from\"../../../store/actions\";import Swal from'sweetalert2';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CheckOut=/*#__PURE__*/function(_Component){_inherits(CheckOut,_Component);var _super=_createSuper(CheckOut);function CheckOut(props){var _this;_classCallCheck(this,CheckOut);_this=_super.call(this,props);_this.handlePaymentMethodChange=function(method,value){_this.setState({selectedPaymentMethod:method});_this.setState(function(prevState){return{error:_objectSpread(_objectSpread({},prevState.error),{},{erSelectPayment:null// Đặt giá trị mới cho erSelectPayment, các trường hợp khác sẽ giữ nguyên\n})};});_this.setState(function(prevState){return{billingInfo:_objectSpread(_objectSpread({},prevState.billingInfo),{},{payment:value})};});};_this.handleChangeInput=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,type){var value,keys,selectedDistricts,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:value=e.target.value;keys=type.split('.');if(!(type===\"district\")){_context.next=10;break;}_this.setState({ward:''});_this.updateAddress();selectedDistricts=e.target.options[e.target.selectedIndex].getAttribute(\"data-name\");_context.next=8;return getCommunes(selectedDistricts);case 8:response=_context.sent;if(response){_this.setState({listWards:response.results});}case 10:if(keys.length===1){_this.setState(_defineProperty({},type,value),function(){if(type===\"addDetail\"||type===\"ward\"||type===\"city\"||type===\"district\"){_this.updateAddress();}});_this.checkError(type,value);}else if(keys.length===2){_this.setState(function(prevState){return _defineProperty({},keys[0],_objectSpread(_objectSpread({},prevState[keys[0]]),{},_defineProperty({},keys[1],value)));});_this.checkError(type,value);}else if(keys.length===3){_this.setState(function(prevState){return _defineProperty({},keys[0],_objectSpread(_objectSpread({},prevState[keys[0]]),{},_defineProperty({},keys[1],_objectSpread(_objectSpread({},prevState[keys[0]][keys[1]]),{},_defineProperty({},keys[2],value)))));});}case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.updateAddress=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState(function(prevState){return{billingInfo:_objectSpread(_objectSpread({},prevState.billingInfo),{},{address:\"\".concat(_this.state.addDetail,\", \").concat(_this.state.ward,\", \").concat(_this.state.district,\", \").concat(_this.state.city)})};});_this.checkSelect();case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref4.apply(this,arguments);};}();_this.updatedBillDetail=function(value,productId){// Tìm sản phẩm trong mảng chi tiết hóa đơn dựa vào productId\nvar updatedBillDetail=_this.state.billingInfo.billDetail.map(function(item){if(item.id_product===productId){// Cập nhật trường note cho sản phẩm tương ứng\nreturn _objectSpread(_objectSpread({},item),{},{notes:value});}return item;});// Cập nhật state với mảng chi tiết hóa đơn đã cập nhật\n_this.setState(function(prevState){return{billingInfo:_objectSpread(_objectSpread({},prevState.billingInfo),{},{billDetail:updatedBillDetail})};});};_this.handlePlaceOrder=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var errorsNull;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.checkInfoNull();errorsNull=Object.values(_this.state.error).every(function(error){return error===null;});if(!errorsNull){_context3.next=8;break;}console.log(\"gdfh\");_context3.next=6;return createBill(_this.state.billingInfo);case 6:_this.handleDeleteCart(_this.props.user.carts.filter(function(item){return item.status===1;}));Swal.fire({title:\"Đặt hàng thành công\",icon:\"success\",showCancelButton:true,confirmButtonText:\"Xem đơn hàng\",cancelButtonText:\"Xem thêm sản phẩm\"}).then(function(result){if(result.isConfirmed){_this.props.history.push(\"/orders\");}else{_this.props.history.push(\"/shop\");}});case 8:case\"end\":return _context3.stop();}}},_callee3);}));_this.handleDeleteCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(cartsSelect){var _iterator,_step,_loop;return _regeneratorRuntime.wrap(function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_iterator=_createForOfIteratorHelper(cartsSelect);_context5.prev=1;_loop=/*#__PURE__*/_regeneratorRuntime.mark(function _loop(){var item,res,carts;return _regeneratorRuntime.wrap(function _loop$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:item=_step.value;_context4.next=3;return deleteCart(item.id);case 3:res=_context4.sent;if(res.errCode===0){carts=_this.props.user.carts.filter(function(cart){return cart.id!==item.id;});// console.log(carts)\n_this.props.updateCartSuccess(carts);}case 5:case\"end\":return _context4.stop();}}},_loop);});_iterator.s();case 4:if((_step=_iterator.n()).done){_context5.next=8;break;}return _context5.delegateYield(_loop(),\"t0\",6);case 6:_context5.next=4;break;case 8:_context5.next=13;break;case 10:_context5.prev=10;_context5.t1=_context5[\"catch\"](1);_iterator.e(_context5.t1);case 13:_context5.prev=13;_iterator.f();return _context5.finish(13);case 16:case\"end\":return _context5.stop();}}},_callee4,null,[[1,10,13,16]]);}));return function(_x4){return _ref6.apply(this,arguments);};}();_this.checkInfoNull=function(){var _this$state$billingIn=_this.state.billingInfo,fullname=_this$state$billingIn.fullname,email=_this$state$billingIn.email,phone_number=_this$state$billingIn.phone_number;var _this$state=_this.state,addDetail=_this$state.addDetail,district=_this$state.district,ward=_this$state.ward,selectedPaymentMethod=_this$state.selectedPaymentMethod;var checks=[{condition:!fullname,errorKey:'erFullname',errorMsg:'Họ tên không được để trống.'},{condition:!addDetail,errorKey:'erAddress',errorMsg:'Địa chỉ không được để trống.'},{condition:!district,errorKey:'erDistrict',errorMsg:'Vui lòng chọn quận/huyện.'},{condition:!ward,errorKey:'erWard',errorMsg:'Vui lòng chọn xã/phường.'},{condition:!email,errorKey:'erEmail',errorMsg:'Email không được để trống.'},{condition:!phone_number,errorKey:'erPhone',errorMsg:'Số điện thoại không được để trống.'},{condition:!selectedPaymentMethod,errorKey:'erSelectPayment',errorMsg:'Vui lòng chọn phương thức thanh toán.'}];var _loop2=function _loop2(){var check=_checks[_i];if(check.condition){_this.setState(function(prevState){return{error:_objectSpread(_objectSpread({},prevState.error),{},_defineProperty({},check.errorKey,check.errorMsg))};});}};for(var _i=0,_checks=checks;_i<_checks.length;_i++){_loop2();}};_this.checkSelect=function(){var _this$state2=_this.state,district=_this$state2.district,ward=_this$state2.ward,address=_this$state2.address;if(district){_this.setState(function(prevState){return{error:_objectSpread(_objectSpread({},prevState.error),{},{erDistrict:null})};});}if(ward){_this.setState(function(prevState){return{error:_objectSpread(_objectSpread({},prevState.error),{},{erWard:null})};});}};_this.checkError=function(type,value){var errorMessages={'billingInfo.fullname':{regex:/^[A-Za-z\\sÀ-ỹ]+$/,errorMsg:'Họ tên không hợp lệ.'},'billingInfo.email':{regex:/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,errorMsg:'Email không đúng định dạng.'},'billingInfo.phone_number':{regex:/^0\\d{9}$/,errorMsg:'Số điện thoại phải bắt đầu bằng số 0 và có 10 chữ số.'},'addDetail':{regex:/^(?!.*null).*$/,errorMsg:'Địa chỉ không hợp lệ.'}};var fieldInfo=errorMessages[type];if(!fieldInfo)return;var isValid=value&&fieldInfo.regex.test(value);var errorKey;if(type==='billingInfo.fullname'){errorKey='erFullname';}else if(type==='billingInfo.email'){errorKey='erEmail';}else if(type==='billingInfo.phone_number'){errorKey='erPhone';}else if(type==='addDetail'){errorKey='erAddress';}if(!isValid){_this.setState(function(prevState){return{error:_objectSpread(_objectSpread({},prevState.error),{},_defineProperty({},errorKey,fieldInfo.errorMsg))};});}else{// Nếu dữ liệu hợp lệ, đặt error thành null\n_this.setState(function(prevState){return{error:_objectSpread(_objectSpread({},prevState.error),{},_defineProperty({},errorKey,null))};});}};var user=_this.props.user;if(!user||!user.userInfo||user.userInfo.id==null){// Chuyển hướng đến trang lỗi nếu id_user là null\nwindow.location.href='/error';return _possibleConstructorReturn(_this);}var _this$props$user=_this.props.user,_carts=_this$props$user.carts,userInfo=_this$props$user.userInfo;var selectedItems=_carts.filter(function(item){return item.status===1;});var pro_bill=selectedItems.reduce(function(total,item){return total+item.ProductData.price*item.quantity;},0);var billDetail=selectedItems.map(function(item){return{id_product:item.id_product,amount:item.quantity,notes:'',price:item.ProductData.price,productname:item.ProductData.name,img:item.ProductData.Images[0].img};});_this.state={listDistricts:[],listWards:[],selectedPaymentMethod:null,error:{},district:'',city:'',ward:'',addDetail:'',billingInfo:{id_user:userInfo.id,fullname:'',email:'',address:'',phone_number:'',notes:'',pro_bill:pro_bill,fee_bill:0,payment:0,billDetail:billDetail}};return _this;}_createClass(CheckOut,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var response;return _regeneratorRuntime.wrap(function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return getDistricts(79);case 2:response=_context6.sent;if(response){this.setState({listDistricts:response.results});}case 4:case\"end\":return _context6.stop();}}},_callee5,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;var selectedItems=this.state.billingInfo.billDetail;var breadcrumbItems=[{title:\"Trang chủ\",link:\"/\",active:false},{title:\"Thanh toán\",link:\"/checkout\",active:true}];var _this$state3=this.state,selectedPaymentMethod=_this$state3.selectedPaymentMethod,error=_this$state3.error,listDistricts=_this$state3.listDistricts,listWards=_this$state3.listWards;// console.log(listWards)\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{pageActive:\"Trang chủ\"}),/*#__PURE__*/_jsx(Breadcrumb,{items:breadcrumbItems}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid py-5 bg-checkout\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container py-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Chi ti\\u1EBFt mua h\\xE0ng\"}),/*#__PURE__*/_jsx(\"form\",{action:\"#\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row g-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 col-lg-6 col-xl-7\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\"H\\u1ECD t\\xEAn\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.billingInfo.fullname,onChange:function onChange(e){return _this2.handleChangeInput(e,\"billingInfo.fullname\");}}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erFullname})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label my-3\",children:[\"\\u0110\\u1ECBa ch\\u1EC9\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"S\\u1ED1 nh\\xE0, to\\xE0 nh\\xE0, t\\xEAn \\u0111\\u01B0\\u1EDDng...\",value:this.state.addDetails,onChange:function onChange(e){return _this2.handleChangeInput(e,\"addDetail\");}}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erAddress})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label my-3\",children:[\"T\\u1EC9nh/th\\xE0nh ph\\u1ED1\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"select\",{className:\"form-control form-select\",value:this.state.city,onChange:function onChange(e){return _this2.handleChangeInput(e,\"city\");},children:/*#__PURE__*/_jsx(\"option\",{selected:true,value:\"TP HCM\",children:\"TP HCM\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label my-3\",children:[\"Qu\\u1EADn/huy\\u1EC7n\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control form-select\",value:this.state.district,onChange:function onChange(e){return _this2.handleChangeInput(e,\"district\");},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,selected:true,hidden:true,children:\"Ch\\u1ECDn qu\\u1EADn/huy\\u1EC7n\"}),listDistricts.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.name,\"data-name\":item.code,children:item.name});})]}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erDistrict})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label my-3\",children:[\"Ph\\u01B0\\u1EDDng/x\\xE3\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control form-select\",value:this.state.ward,onChange:function onChange(e){return _this2.handleChangeInput(e,\"ward\");},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,selected:true,hidden:true,children:\"Ch\\u1ECDn ph\\u01B0\\u1EDDng/x\\xE3\"}),listWards.map(function(item){return/*#__PURE__*/_jsx(\"option\",{value:item.name,children:item.name});})]}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erWard})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label my-3\",children:[\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:this.state.billingInfo.phone_number,className:\"form-control\",onChange:function onChange(e){return _this2.handleChangeInput(e,\"billingInfo.phone_number\");}}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erPhone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-item\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label my-3\",children:[\"Email\",/*#__PURE__*/_jsx(\"sup\",{children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:this.state.billingInfo.email,onChange:function onChange(e){return _this2.handleChangeInput(e,\"billingInfo.email\");}}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erEmail})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"form-item\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Ghi ch\\xFA cho \\u0111\\u01A1n h\\xE0ng...\",value:this.state.billingInfo.notes,onChange:function onChange(e){return _this2.handleChangeInput(e,\"billingInfo.notes\");}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-12 col-lg-6 col-xl-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Gi\\xE1\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"S\\u1ED1 l\\u01B0\\u1EE3ng\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"T\\u1ED5ng c\\u1ED9ng\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedItems.map(function(item,index){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center mt-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.img,className:\"img-fluid rounded-circle\",style:{width:'80px',height:'70px',marginTop:'10px'},alt:\"\"})})}),/*#__PURE__*/_jsx(\"td\",{className:\"py-5\",children:item.productname}),/*#__PURE__*/_jsx(\"td\",{className:\"py-5\",children:item.price}),/*#__PURE__*/_jsx(\"td\",{className:\"py-5\",children:item.amount}),/*#__PURE__*/_jsx(\"td\",{className:\"py-5\",children:item.price*item.amount})]}),/*#__PURE__*/_jsx(\"tr\",{className:\"border-black\",children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-item\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control no-border\",placeholder:\"Ghi ch\\xFA cho t\\u1EEBng b\\xE1nh...\",value:item.notes,onChange:function onChange(e){return _this2.updatedBillDetail(e.target.value,item.id_product);}})})})})]},index);})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 text-center align-items-center justify-content-center border-bottom py-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary-cake text-left\",children:\"Ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-check text-start my-3\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"form-check-label\",id:\"Payments-1\",children:[\"Thanh to\\xE1n b\\u1EB1ng th\\u1EBB n\\u1ED9i \\u0111\\u1ECBa\",/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input bg-primary border-0\",htmlFor:\"Payments-1\",type:\"radio\",name:\"paymentMethod\",value:\"credit_card\",checked:selectedPaymentMethod==='credit_card',onChange:function onChange(){return _this2.handlePaymentMethodChange('credit_card',1);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-check text-start my-3\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"form-check-label\",id:\"Payments-2\",children:[\"Thanh to\\xE1n khi nh\\u1EADn h\\xE0ng\",/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input bg-primary border-0\",htmlFor:\"Payments-2\",type:\"radio\",name:\"paymentMethod\",value:\"cash_on_delivery\",checked:selectedPaymentMethod==='cash',onChange:function onChange(){return _this2.handlePaymentMethodChange('cash',2);}})]})})]}),/*#__PURE__*/_jsx(Error,{error:this.state.error.erSelectPayment})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 text-center align-items-center justify-content-center border-bottom py-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-primary-cake text-left\",children:\"T\\u1ED5ng c\\u1ED9ng:\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"flex-item\",children:\"Th\\xE0nh ti\\u1EC1n:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex-item\",children:[this.state.billingInfo.pro_bill,\" VND\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"flex-item\",children:\"Ph\\xED giao h\\xE0ng:\"}),/*#__PURE__*/_jsx(\"p\",{className:\"flex-item\",children:this.state.billingInfo.fee_bill})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-container\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"flex-item\",children:\"T\\u1ED5ng thanh to\\xE1n:\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"flex-item\",children:[this.state.billingInfo.pro_bill+this.state.billingInfo.fee_bill,\" VND\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row g-4 text-center align-items-center justify-content-center pt-4\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:this.handlePlaceOrder,className:\"btn bg-primary-cake border-secondary text-uppercase w-100 text-white\",children:\"\\u0110\\u1EB7t h\\xE0ng\"})})]})]})})]})}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return CheckOut;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.user};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateCartSuccess:function updateCartSuccess(carts){dispatch(actions.updateCartSuccess(carts));}};};export default connect(mapStateToProps,mapDispatchToProps)(CheckOut);","map":{"version":3,"sources":["D:/Documents/Frontend-React.JS/src/containers/User/CheckOut/CheckOut.js"],"names":["React","Component","connect","Header","Footer","Breadcrumb","Error","createBill","getCommunes","getDistricts","deleteCart","actions","Swal","CheckOut","props","handlePaymentMethodChange","method","value","setState","selectedPaymentMethod","prevState","error","erSelectPayment","billingInfo","payment","handleChangeInput","e","type","target","keys","split","ward","updateAddress","selectedDistricts","options","selectedIndex","getAttribute","response","listWards","results","length","checkError","address","state","addDetail","district","city","checkSelect","updatedBillDetail","productId","billDetail","map","item","id_product","notes","handlePlaceOrder","checkInfoNull","errorsNull","Object","values","every","console","log","handleDeleteCart","user","carts","filter","status","fire","title","icon","showCancelButton","confirmButtonText","cancelButtonText","then","result","isConfirmed","history","push","cartsSelect","id","res","errCode","cart","updateCartSuccess","fullname","email","phone_number","checks","condition","errorKey","errorMsg","check","erDistrict","erWard","errorMessages","regex","fieldInfo","isValid","test","userInfo","window","location","href","selectedItems","pro_bill","reduce","total","ProductData","price","quantity","amount","productname","name","img","Images","listDistricts","id_user","fee_bill","breadcrumbItems","link","active","erFullname","addDetails","erAddress","code","erPhone","erEmail","index","width","height","marginTop","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport \"./CheckOut.scss\"\nimport Header from '../Header/Header';\nimport Footer from '../Footer/Footer';\nimport Breadcrumb from \"../breadcrumb\";\nimport Error from \"../../../components/Error/Error\";\nimport {createBill, getCommunes, getDistricts} from \"../../../services/billService\";\nimport {deleteCart} from \"../../../services/cartService\";\nimport * as actions from \"../../../store/actions\";\nimport Swal from 'sweetalert2';\n\nclass CheckOut extends Component {\n  constructor(props) {\n    super(props);\n    const {user} = this.props;\n    if (!user || !user.userInfo || user.userInfo.id == null) {\n      // Chuyển hướng đến trang lỗi nếu id_user là null\n      window.location.href = '/error';\n      return;\n    }\n    const {carts, userInfo} = this.props.user;\n    const selectedItems = carts.filter(item => item.status === 1);\n    const pro_bill = selectedItems.reduce((total, item) => {\n      return total + (item.ProductData.price * item.quantity);\n    }, 0);\n    const billDetail = selectedItems.map(item => ({\n      id_product: item.id_product,\n      amount: item.quantity,\n      notes: '',\n      price: item.ProductData.price,\n      productname: item.ProductData.name,\n      img: item.ProductData.Images[0].img,\n    }));\n\n    this.state = {\n      listDistricts: [],\n      listWards: [],\n      selectedPaymentMethod: null,\n      error: {},\n      district: '',\n      city: '',\n      ward: '',\n      addDetail: '',\n      billingInfo: {\n        id_user: userInfo.id,\n        fullname: '',\n        email: '',\n        address: '',\n        phone_number: '',\n        notes: '',\n        pro_bill: pro_bill,\n        fee_bill: 0,\n        payment: 0,\n        billDetail: billDetail,\n      },\n    };\n  }\n\n  handlePaymentMethodChange = (method, value) => {\n\n    this.setState({selectedPaymentMethod: method});\n    this.setState(prevState => ({\n      error: {\n        ...prevState.error,\n        erSelectPayment: null // Đặt giá trị mới cho erSelectPayment, các trường hợp khác sẽ giữ nguyên\n      }\n    }));\n    this.setState(prevState => ({\n      billingInfo: {\n        ...prevState.billingInfo,\n        payment: value\n      }\n    }));\n  }\n\n  handleChangeInput = async (e, type) => {\n    const value = e.target.value\n    const keys = type.split('.');\n    if (type === \"district\") {\n      this.setState({\n        ward: ''\n      })\n      this.updateAddress()\n      const selectedDistricts = e.target.options[e.target.selectedIndex].getAttribute(\"data-name\");\n      let response = await getCommunes(selectedDistricts)\n      if (response) {\n        this.setState({\n          listWards: response.results,\n        });\n      }\n    }\n    if (keys.length === 1) {\n\n      this.setState({[type]: value}, () => {\n        if (type === \"addDetail\" || type === \"ward\" || type === \"city\" || type === \"district\") {\n          this.updateAddress();\n        }\n\n      });\n      this.checkError(type, value)\n    } else if (keys.length === 2) {\n\n      this.setState(prevState => ({\n        [keys[0]]: {\n          ...prevState[keys[0]],\n          [keys[1]]: value,\n        },\n      }))\n      this.checkError(type, value)\n    } else if (keys.length === 3) {\n      this.setState(prevState => ({\n        [keys[0]]: {\n          ...prevState[keys[0]],\n          [keys[1]]: {\n            ...prevState[keys[0]][keys[1]],\n            [keys[2]]: value,\n          },\n        },\n      }))\n    }\n\n  };\n\n  updateAddress = async (e) => {\n    this.setState(prevState => ({\n      billingInfo: {\n        ...prevState.billingInfo,\n        address: `${this.state.addDetail}, ${this.state.ward}, ${this.state.district}, ${this.state.city}`\n      }\n    }));\n    this.checkSelect()\n  };\n\n  updatedBillDetail = (value, productId) => {\n    // Tìm sản phẩm trong mảng chi tiết hóa đơn dựa vào productId\n    const updatedBillDetail = this.state.billingInfo.billDetail.map(item => {\n      if (item.id_product === productId) {\n        // Cập nhật trường note cho sản phẩm tương ứng\n        return {...item, notes: value};\n      }\n      return item;\n    });\n\n    // Cập nhật state với mảng chi tiết hóa đơn đã cập nhật\n    this.setState(prevState => ({\n      billingInfo: {\n        ...prevState.billingInfo,\n        billDetail: updatedBillDetail,\n      },\n    }));\n  };\n  handlePlaceOrder = async () => {\n    this.checkInfoNull()\n    const errorsNull = Object.values(this.state.error).every(error => error === null);\n\n    if (errorsNull) {\n      console.log(\"gdfh\")\n\n      await createBill(this.state.billingInfo);\n\n      this.handleDeleteCart(this.props.user.carts.filter(item => item.status === 1))\n      Swal.fire({\n        title: \"Đặt hàng thành công\",\n        icon: \"success\",\n        showCancelButton: true,\n        confirmButtonText: \"Xem đơn hàng\",\n        cancelButtonText: \"Xem thêm sản phẩm\"\n      }).then((result) => {\n        if (result.isConfirmed) {\n          this.props.history.push(\"/orders\");\n        }\n        else{\n          this.props.history.push(\"/shop\");\n        }\n      });\n\n\n    }\n  }\n\n\n  handleDeleteCart = async (cartsSelect) => {\n    for (const item of cartsSelect) {\n      const res = await deleteCart(item.id);\n\n      if (res.errCode === 0) {\n        const carts = this.props.user.carts.filter(cart => cart.id !== item.id);\n        // console.log(carts)\n        this.props.updateCartSuccess(carts);\n      }\n    }\n  }\n\n\n  async componentDidMount() {\n    let response = await getDistricts(79);\n    if (response) {\n      this.setState({\n        listDistricts: response.results,\n      });\n    }\n  }\n\n  render() {\n    const selectedItems = this.state.billingInfo.billDetail\n    const breadcrumbItems = [\n      {title: \"Trang chủ\", link: \"/\", active: false},\n      {title: \"Thanh toán\", link: \"/checkout\", active: true}\n    ];\n    const {selectedPaymentMethod, error, listDistricts, listWards} = this.state;\n    // console.log(listWards)\n    return (<div>\n          <Header pageActive={\"Trang chủ\"}/>\n          <Breadcrumb items={breadcrumbItems}/>\n          {/* Single Page Header End */}\n          {/* Checkout Page Start */}\n          <div className=\"container-fluid py-5 bg-checkout\">\n            <div className=\"container py-5\">\n              <h1 className=\"mb-4\">Chi tiết mua hàng</h1>\n              <form action=\"#\">\n                <div className=\"row g-5\">\n                  <div className=\"col-md-12 col-lg-6 col-xl-7\">\n                    <div className=\"form-item\">\n                      <label className=\"form-label\">Họ tên<sup>*</sup></label>\n                      <input type=\"text\" className=\"form-control\" value={this.state.billingInfo.fullname}\n                             onChange={(e) =>\n                                 this.handleChangeInput(e, \"billingInfo.fullname\")\n                             }/>\n                      <Error error={this.state.error.erFullname}/>\n                    </div>\n                    <div className=\"form-item\">\n                      <label className=\"form-label my-3\">Địa chỉ<sup>*</sup></label>\n                      <input type=\"text\" className=\"form-control\" placeholder=\"Số nhà, toà nhà, tên đường...\"\n                             value={this.state.addDetails}\n                             onChange={(e) =>\n                                 this.handleChangeInput(e, \"addDetail\")\n                             }/>\n                      <Error error={this.state.error.erAddress}/>\n                    </div>\n                    <div className=\"form-item\">\n                      <label className=\"form-label my-3\">Tỉnh/thành phố<sup>*</sup></label>\n                      <select className=\"form-control form-select\" value={this.state.city}\n                              onChange={(e) =>\n                                  this.handleChangeInput(e, \"city\")\n                              }>\n                        <option selected={true} value=\"TP HCM\">TP HCM</option>\n\n                        {/* Thêm các lựa chọn khác tùy thuộc vào nhu cầu của bạn */}\n                      </select>\n                    </div>\n                    <div className=\"form-item\">\n                      <label className=\"form-label my-3\">Quận/huyện<sup>*</sup></label>\n                      <select className=\"form-control form-select\" value={this.state.district}\n                              onChange={(e) =>\n                                  this.handleChangeInput(e, \"district\")\n                              }>\n                        <option value=\"\" disabled selected hidden>Chọn quận/huyện</option>\n                        {listDistricts.map((item) => (\n                            <option value={item.name} data-name={item.code}>{item.name}</option>\n                        ))}\n\n\n                        {/* Thêm các lựa chọn khác tùy thuộc vào nhu cầu của bạn */}\n                      </select>\n                      <Error error={this.state.error.erDistrict}/>\n                    </div>\n                    <div className=\"form-item\">\n                      <label className=\"form-label my-3\">Phường/xã<sup>*</sup></label>\n                      <select className=\"form-control form-select\" value={this.state.ward}\n                              onChange={(e) =>\n                                  this.handleChangeInput(e, \"ward\")\n                              }>\n                        <option value=\"\" disabled selected hidden>Chọn phường/xã</option>\n                        {listWards.map((item) => (\n                            <option value={item.name}>{item.name}</option>\n                        ))}\n                        {/* Thêm các lựa chọn khác tùy thuộc vào nhu cầu của bạn */}\n                      </select>\n                      <Error error={this.state.error.erWard}/>\n                    </div>\n\n\n                    <div className=\"form-item\">\n                      <label className=\"form-label my-3\">Số điện thoại<sup>*</sup></label>\n                      <input type=\"tel\" value={this.state.billingInfo.phone_number} className=\"form-control\"\n                             onChange={(e) =>\n                                 this.handleChangeInput(e, \"billingInfo.phone_number\")\n                             }/>\n                      <Error error={this.state.error.erPhone}/>\n                    </div>\n                    <div className=\"form-item\">\n                      <label className=\"form-label my-3\">Email<sup>*</sup></label>\n                      <input type=\"text\" className=\"form-control\" value={this.state.billingInfo.email}\n                             onChange={(e) =>\n                                 this.handleChangeInput(e, \"billingInfo.email\")\n                             }/>\n                      <Error error={this.state.error.erEmail}/>\n                    </div>\n                    <hr/>\n                    <div className=\"form-item\">\n                      <input type=\"text\" className=\"form-control\" placeholder=\"Ghi chú cho đơn hàng...\"\n                             value={this.state.billingInfo.notes}\n                             onChange={(e) =>\n                                 this.handleChangeInput(e, \"billingInfo.notes\")\n                             }/>\n                    </div>\n                  </div>\n                  <div className=\"col-md-12 col-lg-6 col-xl-5\">\n                    <div className=\"table-responsive\">\n                      <table className=\"table\">\n                        <thead>\n                        <tr>\n                          <th scope=\"col\">#</th>\n                          <th scope=\"col\">Tên</th>\n                          <th scope=\"col\">Giá</th>\n                          <th scope=\"col\">Số lượng</th>\n                          <th scope=\"col\">Tổng cộng</th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        {selectedItems.map((item, index) => (\n                            <React.Fragment key={index}>\n                              <tr>\n                                <th scope=\"row\">\n                                  <div className=\"d-flex align-items-center mt-2\">\n                                    <img src={item.img} className=\"img-fluid rounded-circle\"\n                                         style={{width: '80px', height: '70px', marginTop: '10px'}} alt=\"\"/>\n                                  </div>\n                                </th>\n                                <td className=\"py-5\">{item.productname}</td>\n                                <td className=\"py-5\">{item.price}</td>\n                                <td className=\"py-5\">{item.amount}</td>\n                                <td className=\"py-5\">{item.price * item.amount}</td>\n                              </tr>\n                              <tr className=\"border-black\">\n                                <td colSpan=\"5\">\n                                  <div className=\"form-item\">\n                                    <input\n                                        type=\"text\"\n                                        className=\"form-control no-border\"\n                                        placeholder=\"Ghi chú cho từng bánh...\"\n                                        value={item.notes}\n                                        onChange={(e) => this.updatedBillDetail(e.target.value, item.id_product)}\n                                    />\n                                  </div>\n                                </td>\n                              </tr>\n                            </React.Fragment>\n                        ))}\n                        </tbody>\n                      </table>\n                    </div>\n\n                    <div className=\"row g-4 text-center align-items-center justify-content-center border-bottom py-3\">\n\n                      <div className=\"col-12\">\n                        <h4 className=\"text-primary-cake text-left\">Phương thức thanh toán</h4>\n                        <div className=\"form-check text-start my-3\">\n                          <label className=\"form-check-label\" id=\"Payments-1\">\n                            Thanh toán bằng thẻ nội địa\n                            <input className=\"form-check-input bg-primary border-0\" htmlFor=\"Payments-1\"\n                                   type=\"radio\"\n                                   name=\"paymentMethod\"\n                                   value=\"credit_card\"\n                                   checked={selectedPaymentMethod === 'credit_card'}\n                                   onChange={() => this.handlePaymentMethodChange('credit_card', 1)}/>\n                          </label>\n\n                        </div>\n                        <div className=\"form-check text-start my-3\">\n                          <label className=\"form-check-label\" id=\"Payments-2\">\n                            Thanh toán khi nhận hàng\n                            <input className=\"form-check-input bg-primary border-0\" htmlFor=\"Payments-2\"\n                                   type=\"radio\"\n                                   name=\"paymentMethod\"\n                                   value=\"cash_on_delivery\"\n                                   checked={selectedPaymentMethod === 'cash'}\n                                   onChange={() => this.handlePaymentMethodChange('cash', 2)}/>\n                          </label>\n\n                        </div>\n                      </div>\n                      <Error error={this.state.error.erSelectPayment}/>\n\n                    </div>\n                    <div className=\"row g-4 text-center align-items-center justify-content-center border-bottom py-3\">\n                      <h4 className=\"text-primary-cake text-left\">Tổng cộng:</h4>\n                      <div className=\"col-12\">\n                        <div className=\"flex-container\">\n                          <p className=\"flex-item\">Thành tiền:</p>\n                          <p className=\"flex-item\">{this.state.billingInfo.pro_bill} VND</p>\n                        </div>\n                        <div className=\"flex-container\">\n                          <p className=\"flex-item\">Phí giao hàng:</p>\n                          <p className=\"flex-item\">{this.state.billingInfo.fee_bill}\n                          </p>\n                        </div>\n                        <div className=\"flex-container\">\n                          <p className=\"flex-item\">Tổng thanh toán:</p>\n                          <p className=\"flex-item\">{this.state.billingInfo.pro_bill + this.state.billingInfo.fee_bill} VND</p>\n                        </div>\n\n\n                      </div>\n                    </div>\n                    <div className=\"row g-4 text-center align-items-center justify-content-center pt-4\">\n                      <button type=\"button\" onClick={this.handlePlaceOrder}\n                              className=\"btn bg-primary-cake border-secondary text-uppercase w-100 text-white\">Đặt hàng\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </div>\n          {/* Checkout Page End */}\n          <Footer/>\n        </div>\n    )\n  }\n\n  checkInfoNull = () => {\n    const {fullname, email, phone_number} = this.state.billingInfo;\n    const {addDetail, district, ward, selectedPaymentMethod} = this.state;\n\n    const checks = [\n      {condition: !fullname, errorKey: 'erFullname', errorMsg: 'Họ tên không được để trống.'},\n      {condition: !addDetail, errorKey: 'erAddress', errorMsg: 'Địa chỉ không được để trống.'},\n      {condition: !district, errorKey: 'erDistrict', errorMsg: 'Vui lòng chọn quận/huyện.'},\n      {condition: !ward, errorKey: 'erWard', errorMsg: 'Vui lòng chọn xã/phường.'},\n      {condition: !email, errorKey: 'erEmail', errorMsg: 'Email không được để trống.'},\n      {condition: !phone_number, errorKey: 'erPhone', errorMsg: 'Số điện thoại không được để trống.'},\n      {\n        condition: !selectedPaymentMethod,\n        errorKey: 'erSelectPayment',\n        errorMsg: 'Vui lòng chọn phương thức thanh toán.'\n      }\n    ];\n    for (let check of checks) {\n      if (check.condition) {\n        this.setState(prevState => ({\n          error: {\n            ...prevState.error,\n            [check.errorKey]: check.errorMsg\n          }\n        }));\n      }\n    }\n  };\n  checkSelect = () => {\n    const {district, ward, address} = this.state;\n    if (district) {\n      this.setState(prevState => ({\n        error: {\n          ...prevState.error,\n          erDistrict: null,\n        }\n      }));\n    }\n    if (ward) {\n      this.setState(prevState => ({\n        error: {\n          ...prevState.error,\n          erWard: null,\n        }\n      }));\n    }\n  }\n\n\n  checkError = (type, value) => {\n\n    const errorMessages = {\n      'billingInfo.fullname': {\n        regex: /^[A-Za-z\\sÀ-ỹ]+$/,\n        errorMsg: 'Họ tên không hợp lệ.'\n      },\n      'billingInfo.email': {\n        regex: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n        errorMsg: 'Email không đúng định dạng.'\n      },\n      'billingInfo.phone_number': {\n        regex: /^0\\d{9}$/,\n        errorMsg: 'Số điện thoại phải bắt đầu bằng số 0 và có 10 chữ số.'\n      },\n      'addDetail': {\n        regex: /^(?!.*null).*$/,\n        errorMsg: 'Địa chỉ không hợp lệ.'\n      }\n\n    };\n    const fieldInfo = errorMessages[type];\n    if (!fieldInfo) return;\n\n    const isValid = value && fieldInfo.regex.test(value);\n    let errorKey;\n    if (type === 'billingInfo.fullname') {\n      errorKey = 'erFullname';\n    } else if (type === 'billingInfo.email') {\n      errorKey = 'erEmail';\n    } else if (type === 'billingInfo.phone_number') {\n      errorKey = 'erPhone';\n    }\n    else if (type === 'addDetail') {\n      errorKey = 'erAddress';\n    }\n\n      if (!isValid) {\n\n        this.setState(prevState => ({\n          error: {\n            ...prevState.error,\n            [errorKey]: fieldInfo.errorMsg\n          }\n        }));\n      } else {\n        // Nếu dữ liệu hợp lệ, đặt error thành null\n        this.setState(prevState => ({\n          error: {\n            ...prevState.error,\n            [errorKey]: null\n          }\n        }));\n      }\n  }\n\n\n\n}\n  const mapStateToProps = (state) => {\n  return {\n    user: state.user,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    updateCartSuccess: (carts) => {\n      dispatch(actions.updateCartSuccess(carts));\n    },\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CheckOut);\n"]},"metadata":{},"sourceType":"module"}