{"ast":null,"code":"import _regeneratorRuntime from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/Documents/Frontend-React.JS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{path}from\"../../../utils\";import{Link}from\"react-router-dom\";import Header from\"../Header/Header\";import Footer from\"../Footer/Footer\";import*as actions from\"../../../store/actions\";import{updateCart,updateStatusCart,deleteCart}from\"../../../services/cartService\";import{FormattedMessage}from\"react-intl\";import Empty from\"../../../components/Empty\";import Breadcrumb from\"../breadcrumb\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Cart=/*#__PURE__*/function(_Component){_inherits(Cart,_Component);var _super=_createSuper(Cart);function Cart(props){var _this;_classCallCheck(this,Cart);_this=_super.call(this,props);_this.handleUpdateQuantityCart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id,quantity){var res,carts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return updateCart(id,quantity);case 2:res=_context.sent;if(res.errCode===0){carts=_this.props.user.carts.map(function(item){if(item.id===id){return _objectSpread(_objectSpread({},item),{},{quantity:quantity});}return item;});_this.props.updateCartSuccess(carts);}case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleUpdateStatusCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,status){var res,carts;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return updateStatusCart(id,status);case 2:res=_context2.sent;if(res.errCode===0){console.log(\"status\",status);carts=_this.props.user.carts.map(function(item){if(item.id===id){return _objectSpread(_objectSpread({},item),{},{status:status});}return item;});_this.props.updateCartSuccess(carts);}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();_this.handleDeleteCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var res,carts;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return deleteCart(id);case 2:res=_context3.sent;if(res.errCode===0){carts=_this.props.user.carts.filter(function(item){return item.id!==id;});_this.props.updateCartSuccess(carts);}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5){return _ref3.apply(this,arguments);};}();_this.handleCheckout=function(){_this.props.history.push(\"/checkout\");};_this.state={isShow:false};return _this;}// update cart\n_createClass(Cart,[{key:\"render\",value:function render(){var _this2=this;var carts=this.props.user.carts;var selectedItems=this.state.selectedItems;var breadcrumbItems=[{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"page.home\"}),link:\"/\",active:false},{title:/*#__PURE__*/_jsx(FormattedMessage,{id:\"page.cart\"}),link:\"/cart\",active:true}];var total=0;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{pageActive:\"Trang chủ\"}),/*#__PURE__*/_jsx(Breadcrumb,{items:breadcrumbItems}),carts&&carts.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid py-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container py-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.product\"})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.name\"})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.price\"})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.quantity\"})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.total\"})}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.handle\"})})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:carts.map(function(item,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:item.status===1,onChange:function onChange(){return _this2.handleUpdateStatusCart(item.id,item.status===1?0:1);}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(item.ProductData.Images[0].img),alt:\"\",style:{width:\"70px\"}})}),/*#__PURE__*/_jsx(\"td\",{children:item.ProductData.name}),/*#__PURE__*/_jsx(\"td\",{children:item.ProductData.price}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group quantity \",style:{width:\"100px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group-btn\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleUpdateQuantityCart(item.id,item.quantity-1);},className:\"btn btn-sm btn-minus rounded-circle bg-light border\",style:{width:\"32px\",height:\"32px\"},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-minus\"})})}),/*#__PURE__*/_jsx(\"input\",{value:item.quantity,type:\"text\",className:\"form-control form-control-sm text-center border-0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group-btn\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return _this2.handleUpdateQuantityCart(item.id,item.quantity+1);},className:\"btn btn-sm btn-plus rounded-circle bg-light border\",style:{width:\"32px\",height:\"32px\"},children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-plus\"})})})]})}),/*#__PURE__*/_jsx(\"td\",{children:item.ProductData.price*item.quantity}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",style:{width:\"32px\",height:\"32px\"},onClick:function onClick(){return _this2.handleDeleteCart(item.id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]},index);})})]})}),/*#__PURE__*/_jsx(Link,{className:\"text-primary-cake read-more\",to:\"/shop\",children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.see_products\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row g-4 justify-content-end\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8 col-md-7 col-lg-6 col-xl-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light rounded\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"display-6 mb-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"fw-normal\",children:[\" \",/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.total\"})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"py-4 mb-4 border-top border-bottom d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0 me-4\",children:[/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.subtotal\"}),\":\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-0\",children:[carts.filter(function(item){return item.status===1;}).reduce(function(total,item){return total+item.ProductData.price*item.quantity;},0).toFixed(0),\" VND\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn border-secondary btn_checkout\",type:\"button\",onClick:this.handleCheckout,children:/*#__PURE__*/_jsx(FormattedMessage,{id:\"cart.order\"})})]})})]})]})}):/*#__PURE__*/_jsx(Empty,{message:\"Không có sản phẩm nào trong giỏ hàng.\"}),/*#__PURE__*/_jsx(Footer,{})]});}}]);return Cart;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.user};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{updateCartSuccess:function updateCartSuccess(carts){dispatch(actions.updateCartSuccess(carts));}};};export default connect(mapStateToProps,mapDispatchToProps)(Cart);","map":{"version":3,"sources":["D:/Documents/Frontend-React.JS/src/containers/User/Cart/Cart.js"],"names":["React","Component","connect","path","Link","Header","Footer","actions","updateCart","updateStatusCart","deleteCart","FormattedMessage","Empty","Breadcrumb","Cart","props","handleUpdateQuantityCart","id","quantity","res","errCode","carts","user","map","item","updateCartSuccess","handleUpdateStatusCart","status","console","log","handleDeleteCart","filter","handleCheckout","history","push","state","isShow","selectedItems","breadcrumbItems","title","link","active","total","length","index","ProductData","Images","img","width","name","price","height","reduce","toFixed","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { path } from \"../../../utils\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Header from \"../Header/Header\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport * as actions from \"../../../store/actions\";\r\nimport {\r\n  updateCart,\r\n  updateStatusCart,\r\n  deleteCart,\r\n} from \"../../../services/cartService\";\r\nimport { FormattedMessage } from \"react-intl\";\r\nimport Empty from \"../../../components/Empty\";\r\nimport Breadcrumb from \"../breadcrumb\";\r\n\r\nclass Cart extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isShow: false,\r\n    };\r\n  }\r\n\r\n  // update cart\r\n  handleUpdateQuantityCart = async (id, quantity) => {\r\n    const res = await updateCart(id, quantity);\r\n    if (res.errCode === 0) {\r\n      const carts = this.props.user.carts.map((item) => {\r\n        if (item.id === id) {\r\n          return { ...item, quantity: quantity };\r\n        }\r\n        return item;\r\n      });\r\n\r\n      this.props.updateCartSuccess(carts);\r\n    }\r\n  };\r\n\r\n  handleUpdateStatusCart = async (id, status) => {\r\n    const res = await updateStatusCart(id, status);\r\n    if (res.errCode === 0) {\r\n      console.log(\"status\", status);\r\n      const carts = this.props.user.carts.map((item) => {\r\n        if (item.id === id) {\r\n          return { ...item, status: status };\r\n        }\r\n        return item;\r\n      });\r\n\r\n      this.props.updateCartSuccess(carts);\r\n    }\r\n  };\r\n\r\n  handleDeleteCart = async (id) => {\r\n    const res = await deleteCart(id);\r\n    if (res.errCode === 0) {\r\n      const carts = this.props.user.carts.filter((item) => item.id !== id);\r\n      this.props.updateCartSuccess(carts);\r\n    }\r\n  };\r\n  handleCheckout = () => {\r\n    this.props.history.push(\"/checkout\");\r\n  };\r\n\r\n\r\n  render() {\r\n    const { carts } = this.props.user;\r\n    const {  selectedItems } = this.state;\r\n    const breadcrumbItems = [\r\n      { title: <FormattedMessage id=\"page.home\" />, link: \"/\", active: false },\r\n      {\r\n        title: <FormattedMessage id=\"page.cart\" />,\r\n        link: \"/cart\",\r\n        active: true,\r\n      },\r\n    ];\r\n    let total = 0;\r\n    return (\r\n      <>\r\n        <Header pageActive={\"Trang chủ\"} />\r\n        <Breadcrumb items={breadcrumbItems} />\r\n\r\n        {carts && carts.length > 0 ? (\r\n          <div className=\"container-fluid py-5\">\r\n            <div className=\"container py-5\">\r\n              <div className=\"table-responsive\">\r\n                <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th scope=\"col\">#</th>\r\n                      <th scope=\"col\">\r\n                        <FormattedMessage id=\"cart.product\" />\r\n                      </th>\r\n                      <th scope=\"col\">\r\n                        <FormattedMessage id=\"cart.name\" />\r\n                      </th>\r\n                      <th scope=\"col\">\r\n                        <FormattedMessage id=\"cart.price\" />\r\n                      </th>\r\n                      <th scope=\"col\">\r\n                        <FormattedMessage id=\"cart.quantity\" />\r\n                      </th>\r\n                      <th scope=\"col\">\r\n                        <FormattedMessage id=\"cart.total\" />\r\n                      </th>\r\n                      <th scope=\"col\">\r\n                        <FormattedMessage id=\"cart.handle\" />\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {carts.map((item, index) => (\r\n\r\n                      <tr key={index}>\r\n                        <th scope=\"row\">\r\n                          <input\r\n                            type=\"checkbox\"\r\n                            checked={item.status === 1}\r\n                            onChange={() =>\r\n                              this.handleUpdateStatusCart(\r\n                                item.id,\r\n                                item.status === 1 ? 0 : 1\r\n                              )\r\n                            }\r\n                          />\r\n                        </th>\r\n                        <td>\r\n                          <img\r\n                            src={`${item.ProductData.Images[0].img}`}\r\n                            alt=\"\"\r\n                            style={{ width: \"70px\" }}\r\n                          />\r\n                        </td>\r\n                        <td>{item.ProductData.name}</td>\r\n                        <td>{item.ProductData.price}</td>\r\n                        <td>\r\n                          <div\r\n                            className=\"input-group quantity \"\r\n                            style={{ width: \"100px\" }}\r\n                          >\r\n                            <div className=\"input-group-btn\">\r\n                              <button\r\n                                onClick={() =>\r\n                                  this.handleUpdateQuantityCart(\r\n                                    item.id,\r\n                                    item.quantity - 1\r\n                                  )\r\n                                }\r\n                                className=\"btn btn-sm btn-minus rounded-circle bg-light border\"\r\n                                style={{ width: \"32px\", height: \"32px\" }}\r\n                              >\r\n                                <i className=\"fa fa-minus\" />\r\n                              </button>\r\n                            </div>\r\n                            <input\r\n                              value={item.quantity}\r\n                              type=\"text\"\r\n                              className=\"form-control form-control-sm text-center border-0\"\r\n                            />\r\n                            <div className=\"input-group-btn\">\r\n                              <button\r\n                                onClick={() =>\r\n                                  this.handleUpdateQuantityCart(\r\n                                    item.id,\r\n                                    item.quantity + 1\r\n                                  )\r\n                                }\r\n                                className=\"btn btn-sm btn-plus rounded-circle bg-light border\"\r\n                                style={{ width: \"32px\", height: \"32px\" }}\r\n                              >\r\n                                <i className=\"fa fa-plus\" />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>{item.ProductData.price * item.quantity}</td>\r\n\r\n                        <td>\r\n                          <button\r\n                            className=\"btn btn-danger\"\r\n                            style={{ width: \"32px\", height: \"32px\" }}\r\n                            onClick={() => this.handleDeleteCart(item.id)}\r\n                          >\r\n                            <i className=\"fas fa-trash\"></i>\r\n                          </button>\r\n                        </td>\r\n                      </tr>\r\n\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <Link className=\"text-primary-cake read-more\" to=\"/shop\">\r\n                <FormattedMessage id=\"cart.see_products\" />\r\n              </Link>\r\n              <div className=\"row g-4 justify-content-end\">\r\n                <div className=\"col-8\" />\r\n                <div className=\"col-sm-8 col-md-7 col-lg-6 col-xl-4\">\r\n                  <div className=\"bg-light rounded\">\r\n                    <div className=\"p-4\">\r\n                      <h1 className=\"display-6 mb-4\">\r\n                        <span className=\"fw-normal\">\r\n                          {\" \"}\r\n                          <FormattedMessage id=\"cart.total\" />\r\n                        </span>\r\n                      </h1>\r\n                    </div>\r\n                    <div className=\"py-4 mb-4 border-top border-bottom d-flex justify-content-between\">\r\n                      <h5 className=\"mb-0 me-4\">\r\n                        <FormattedMessage id=\"cart.subtotal\" />:\r\n                      </h5>\r\n                      <p className=\"mb-0\">\r\n                        {\r\n                          carts\r\n                              .filter(item => item.status === 1)\r\n                              .reduce((total, item) => total + item.ProductData.price * item.quantity, 0)\r\n                              .toFixed(0)\r\n                        } VND\r\n                      </p>\r\n                    </div>\r\n                    <button\r\n                      className=\"btn border-secondary btn_checkout\"\r\n                      type=\"button\"  onClick={this.handleCheckout}\r\n                    >\r\n                      <FormattedMessage id=\"cart.order\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <Empty message={\"Không có sản phẩm nào trong giỏ hàng.\"} />\r\n        )}\r\n        {/* Cart Page End */}\r\n        <Footer />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    user: state.user,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateCartSuccess: (carts) => {\r\n      dispatch(actions.updateCartSuccess(carts));\r\n    },\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Cart);\r\n"]},"metadata":{},"sourceType":"module"}